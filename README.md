<<<<<<< HEAD
# kpl-score
A wechat app for calculating the probability of appearing in kpl group matches.
=======
# KPL赛事积分计算器

一个用于计算KPL赛事队伍出线概率的微信小程序。

## 功能概述

开发一个名为"kpl-score"的微信小程序，功能包括根据小组赛目前的胜负情况，计算每个队伍的出线概率。

## 功能介绍

### 1. 数据导入导出
- 点击"复制信息"按钮，可以将当前所有数据（包括队伍、小组和比赛记录）以文本形式复制到剪贴板
- 点击"输入信息"按钮，可以打开输入框
- 在输入框中粘贴之前复制的信息，点击"确定"即可导入数据
- 导入的数据会替换当前所有数据，请谨慎操作

### 2. 添加队伍
- 点击"添加队伍"按钮
- 输入队伍名称（如"jdg"）
- 点击队伍下方的"添加比分"按钮
- 选择已有队伍作为对手（如"ksg"）
- 选择比分（可选："未比赛"、"3：0"、"3：1"、"3：2"、"2：3"、"1：3"、"0：3"）
- 点击"确定"按钮
- 注意：选择比分后比分情况会更新到双方队伍的详情中
- 队伍列表会根据积分自动排序显示
- 选择"未比赛"时不会添加比赛记录

### 3. 添加小组
- 点击"添加小组"按钮
- 输入"小组名称"（如"S组"）
- 选择"小组名次"（如"2"）
- 点击"确定"按钮
- 注意：小组名称和名次不能重复
- 小组列表会根据名次自动升序排序显示

### 4. 管理小组
- 点击已有小组可以打开编辑弹窗
- 在编辑弹窗中可以修改小组名称和名次
- 点击"确定"保存修改，或点击"取消"放弃修改
- 点击小组右侧的"删除"按钮可以删除该小组
- 删除小组时会弹出确认对话框
- 修改小组时也会检查名称和名次是否重复

### 5. 计算出线概率
- 点击"计算"按钮
- 系统会根据已输入的队伍和小组信息，计算每个队伍出线概率

### 6. 删除队伍
- 点击"删除队伍"按钮
- 弹出询问"是否确定删除该队伍及其比分？"
- 用户可以点击"确定"或"取消"
- 若点击"确定"则删除这个队伍，并删除该队伍与其他队伍的比分
- 删除后队伍列表会自动重新排序

### 7. 查看队伍详情
- 点击已有队伍
- 展示已有队伍和其他队伍的比分
- 可以点击任意比赛记录进行比分调整

### 8. 调整比分
- 在队伍详情中点击要修改的比赛记录
- 在弹出的编辑弹窗中选择新的比分
- 点击"确定"保存修改，或点击"取消"放弃修改
- 修改后会自动重新计算所有队伍的积分
- 队伍列表会根据新的积分自动重新排序
- 选择"未比赛"时会删除该比赛记录

## 逻辑介绍

### 1. 如何计算积分？
积分分为大分和小分：
- 大分：在一场比赛中得到三分的队伍获得一个大分，另一个队伍获得0个大分
- 小分：一场比赛中每个队伍的小分为赢的分数减去对手赢的分数
- 示例：如jdg2:3hero，则jdg获得0个大分，hero获得1个大分；jdg获得-1个小分，hero获得1个小分

### 2. 如何计算排名？
排名是根据三个关键字进行排序：
- 第一关键字：大分（降序）
- 第二关键字：小分（降序）
- 第三关键字：队伍名称字典序（升序）

### 3. 如何计算出线概率？
出线概率是根据队伍目前大分和小分以及未来对手的比分，参考小组名次来确定的。

## 示例

假设有以下数据：
- 六个队伍：ksg、hero、we、es、edgm、dyg
- 三个小组：S组（名次2）、A组（名次4）、B组（名次6）
- 已完成场次：
  - jdg 2:3 hero
  - we 3:0 es
  - dyg 1:3 hero
  - edgm 3:2 dyg
  - es 3:1 dyg
  - we 1:3 edgm
  - hero 2:3 es
  - we 1:3 hero
  - jdg 3:1 dyg
  - edgm 3:1 es

计算结果示例：
- jdg：S组 16.40%，A组 44.26%，B组 39.34%
- 其他队伍类似

## 技术实现

1. 前端界面：
   - 使用微信小程序原生组件
   - 采用flex布局实现响应式设计
   - 使用modal弹窗实现比分添加和编辑功能
   - 实现队伍详情查看和比分调整功能
   - 实现队伍列表的自动排序显示
   - 优化弹窗交互，防止弹窗打开时误触其他按钮
   - 实现弹窗打开时隐藏其他内容，提供更好的视觉体验
   - 实现数据的导入导出功能，支持数据备份和恢复

2. 数据处理：
   - 使用JavaScript实现概率计算逻辑
   - 采用模块化设计，将概率计算逻辑独立封装
   - 实现实时积分计算和更新
   - 支持比分修改后的数据同步更新
   - 实现队伍排序算法，确保列表实时更新
   - 实现JSON格式的数据序列化和反序列化

3. 数据存储：
   - 使用小程序本地数据存储
   - 支持实时计算和更新
   - 维护比赛记录和队伍积分的一致性
   - 保持队伍列表的排序状态
   - 支持数据的导入导出，方便数据备份和迁移

## 使用说明

1. 克隆项目到本地
2. 使用微信开发者工具打开项目
3. 在app.json中配置自己的AppID
4. 编译运行即可使用

## 注意事项

1. 添加队伍时不能重复添加同名队伍
2. 添加小组时需要同时输入小组名称和名次
3. 小组名称和名次都不能重复
4. 小组列表会根据名次自动升序排序
5. 添加比分时需要先添加至少两支队伍
6. 计算概率前需要确保已添加队伍、小组和比赛记录
7. 修改比分后会自动更新所有相关队伍的积分
8. 删除队伍时会同时删除该队伍的所有比赛记录
9. 队伍列表会根据积分实时自动排序
10. 排序规则：大分 > 小分 > 队伍名称
11. 弹窗打开时，其他按钮和输入框将被禁用，防止误操作
12. 弹窗打开时，其他内容会被隐藏，提供更清晰的视觉体验
13. 选择"未比赛"选项时，不会添加或会删除相应的比赛记录
14. 导入数据时会替换当前所有数据，请确保导入的数据格式正确
15. 建议定期使用"复制信息"功能备份数据

## 更新日志

### 2024-03-21
1. 调整小程序底部导航栏：
   - 将"快速开始"页面改名为"概率计算"
   - 将"基础能力"页面改名为"历史记录"
   - 删除"我"页面
>>>>>>> b893d84 (The input of website)
